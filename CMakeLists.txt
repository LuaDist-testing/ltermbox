CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

PROJECT(TERMBOX C)

SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -std=gnu99")

SET(TERMBOX_LIB_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/input.c
	${CMAKE_CURRENT_SOURCE_DIR}/ringbuffer.c
	${CMAKE_CURRENT_SOURCE_DIR}/term.c
	${CMAKE_CURRENT_SOURCE_DIR}/termbox.c
	${CMAKE_CURRENT_SOURCE_DIR}/utf8.c
)

SET(KEYBOARD_SRC
	${CMAKE_CURRENT_SOURCE_DIR}/keyboard.c
)


ADD_LIBRARY(termbox STATIC ${TERMBOX_LIB_SRC})
ADD_EXECUTABLE(keyboard ${KEYBOARD_SRC})
TARGET_LINK_LIBRARIES(keyboard termbox)

OPTION(TERMBOX_SHARED "Build static library for use in shared libraries (uses fPIC)" OFF)


IF(TERMBOX_SHARED)
	SET_TARGET_PROPERTIES(termbox PROPERTIES COMPILE_FLAGS -fPIC)
ENDIF(TERMBOX_SHARED)

FIND_PROGRAM(PYREX pyrexc)
IF(PYREX)
	SUBDIRS(py)
ENDIF()
